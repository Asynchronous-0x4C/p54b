# クラス
クラスは、Processing(Java)のようなオブジェクト指向と呼ばれるプログラミング言語を使う上で最も重要な機能だ。

最初は理解しにくいと思うので、分からなければ何度も読み返したり、先輩に質問するなどして理解を深めてほしい。

## クラスって何?
クラスというのは、いわば「変数を作るための設計図」のことだ。<br>
具体的に何を設計しているのかというと、主に
- 初期化時の処理をつかさどる「コンストラクタ」
- 内部で利用する変数を決める「フィールド」
- クラスの機能を決める「メソッド」

の3つだ。

文字で説明されても分かりにくいと思うので、`String`型でそれぞれの部分を見てみよう。
```Java
//下の構文は String s="adopt";と同じ意味。
String s=new String("adopt");//newという構文で「コンストラクタ」を呼び出し、初期化する。同時に、内部の「フィールド」に必要な情報が記録される。

s=s.replace("o","a");//「メソッド」を呼び出し、操作する。
```

ひとまず、「コンストラクタ」「フィールド」「メソッド」の3語は超重要なので必ず覚えておいてほしい。

## 実際の書き方
Processing(Java)では次のようにクラスを定義する。
```Java
class [クラス名]{
  [フィールドたち]

  [クラス名]([引数]){
    [初期化内容]
  }

  [メソッドたち]
}
```

以下に点の座標を保存するクラスを例示する。
```Java
class Point{
  float x;//x座標を表すフィールド
  float y;//y座標を表すフィールド

  //コンストラクタでは戻り値を指定しない
  //クラス名と同じ名前で戻り値が指定されていない関数のようなものがコンストラクタとして認識される。
  Point(float x,float y){
    //thisというのは、フィールド(正確にはクラス自身)を参照することを表す。
    //同じ名前の変数がフィールドと引数にあるときは引数側が優先されるので、
    ///thisを使用して明示的にフィールドの変数であることを指定する必要がある。
    this.x=x;
    this.y=y;
  }

  //位置を更新するメソッド
  void setPosition(float x,float y){
    this.x=x;
    this.y=y;
  }

  //x座標を取得するメソッド
  float getX(){
    //ここでは変数名がかぶっていないのでthisは不要
    return x;
  }

  //y座標を取得するメソッド
  float getY(){
    return y;
  }
}
```

ここで何か似たものを見たような気がしてきたのではないかと思う。

というのも、クラスというのは、言ってしまえば記法は違えど普段書いているスケッチと大差がない。

普段のスケッチでは変数を宣言し、setup()関数で初期化の処理を記述し、処理に応じて関数を定義してきた。<br>
クラスでは、名前がついていたりコンストラクタに独特の記法があるものの、いつもとやることは変わらない。

## クラスの使い方
クラスというのは冒頭で述べた通り単なる設計図でしかないので、実体である「インスタンス」を作成する必要がある。
「インスタンス」を作成するには、おまじないとして使っていた`new`を使う。
```Java
[クラス名] [変数名] = new [クラス名]([コンストラクタの引数]);

//Pointクラスの例
Point p=new Point(100,50);
```

メソッドの呼び出しに関しては今まででも使ってきたので、特筆することはないだろう。
```Java
[変数名].[メソッド名]([引数]);

//Pointクラスの例
println(p.getX());//100

p.setPosition(125,200);

println(p.getX());//125
println(p.y);//200
```

## クラスの使いどころ
クラスは、同じ仕組みで動くものを作る時に活用すると、プログラムの流れや設計が劇的に簡単になる。<br>
具体的な例を挙げるとすれば、
- ゲームの敵キャラ
- ゲームのマップタイル
- UIのボタン

などに該当する。